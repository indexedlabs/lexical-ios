# Implementation Log (Lexical iOS)

## 2025-12-30
- lexical-ios-d3s (in progress): Remapped backspace at start-of-paragraph when the previous sibling is an empty element so deletion targets the empty paragraph boundary instead of the next paragraph's first character; corrected RopeReconciler clamp handling so structural deletes outside the clamp are preserved (fixes text duplication when merging paragraphs); expanded empty-paragraph guard to handle caret-at-text-start boundary mapping and added affinity-focused usage tests (backspace/insert at boundary + multiple empty paragraphs).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsageDeleteBoundaryTests test` (passed). Log: `/tmp/lexical-test-results.log`.

## 2025-12-29
- lexical-ios-7nw.6 (in progress): Investigated backspace-at-boundary regressions; added native-selection boundary test; adjusted range-cache mapping for postamble locations and tightened backspace selection clamping + paragraph-boundary fallback selection in `RangeSelection.deleteCharacter` / `applySelectionRange`.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsageDeleteBoundaryTests test` (failed; 29 failures). Log: `/tmp/lexical-test-results.log`.

## 2025-12-27
- lexical-ios-k5i.6 (done): Added reconciler metrics recording to `RopeReconciler` (path label + planning/apply timing + dirty/range counts) so `EditorMetricsContainer` receives `.reconcilerRun` events again after the migration.
- lexical-ios-k5i.1 (done): Updated the old OptimizedReconciler fast-path tests to assert RopeReconciler behavior (metrics recorded; no full-reconcile/hydrate) instead of OptimizedReconciler path labels.
- lexical-ios-k5i.1 (done): Fixed RopeReconciler incremental range-cache maintenance for structural edits (filter subtree removes to avoid double-deletes; update element preamble/postamble lengths; propagate childrenLength deltas to ancestors; shift locations excluding ancestors; prune rangeCache on removes/inserts).
- lexical-ios-k5i.1 (done): Fixed inline image undo/redo parity by (1) building inserted node content using `appendAttributedSubtree` so decorator preambles are included, and (2) ensuring image parity tests don’t reuse a single `EditorConfig` across multiple editors (plugin instances are not reusable).
- lexical-ios-k5i.3 (done): Restored block-level paragraph spacing application in RopeReconciler (`AttributeUtils.applyBlockLevelAttributes`) so block margin/padding theme attributes are reflected in paragraph styles.
- lexical-ios-k5i.5 (done): Decorator position cache tests passing on iOS simulator (verified).
- lexical-ios-k5i.4 (done): Fixed selection mapping into newly-inserted element subtrees by recomputing range cache entries for all descendants after inserting an `ElementNode` (commit: 896c935). This fixes `SelectionTests.testInsertTextWithinBoldParagraph` and unblocks cross-node selection tests under RopeReconciler.
- lexical-ios-k5i.7 (done): Sorted RopeReconciler update operations by range-cache location to reduce order-dependent parity flakes in list/insert-block sequences (commit: 259e78a).
- lexical-ios-k5i.2 (done): Fixed large-paste regressions by skipping ancestor-only “dirty” updates, tightening block-attribute dirty inputs, and incrementally updating `TextNode` content to avoid full replacements (commit: 259e78a).
- lexical-ios-k5i.8 (done): Fixed `ModernTextKitOptimizationsTests` by shifting range-cache deltas after the old text end when a `TextNode` changes length (commit: 259e78a).
- lexical-ios-k5i (done): Full iOS simulator test suite passing (excluding benchmarks) + Playground builds after the RopeReconciler migration (commit: 259e78a).
- lexical-ios-ihl.3 (done): Speed up `pointAtStringLocation` by binary-searching child cached ranges (preserving boundary semantics) and avoiding per-call allocations in the hot path (commit: 424a49e).
- lexical-ios-ihl.5 (done): Added Fenwick-backed lazy location support for RopeReconciler text-only updates (no O(N) suffix shifts), with opt-in materialization before structural reconciles; plumbed Fenwick-aware location mapping through selection ↔︎ string location conversion and `pointAtStringLocation`; updated decorator layout invalidation to use `Editor.actualRange(for:)`; added `fenwickHasDeltas` tracking and hardened `actualLocation` against undersized trees; reset Fenwick state on full rebuilds/hydration (commit: 4ca7903).
- lexical-ios-hx1 (done): Added regression test for repeated `sample.md` pastes with interleaved newlines and fixed `LargePasteCursorMovementTests` UIWindow lifecycle cleanup to avoid cross-test memory/time flakes (commit: 5ceede9).
- lexical-ios-ihl.6 (done): Added 2k+ line paste regression (`testPasteGenerated2000Lines_MemoryAndCaretMoves`) with peak memory + caret-move timing checks and PERF_JSON emission for scripts/benchmarks.py (commit: a88fb55).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/MetricsTests test` (passed); `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/OptimizedReconcilerTextFastPathTests test` (passed).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/OptimizedReconcilerHistoryParityTests -only-testing:LexicalTests/OptimizedReconcilerHistoryListQuoteParityTests/testParity_UndoRedo_QuoteSplitMerge -only-testing:LexicalTests/OptimizedReconcilerDecoratorGranularityParityTests/testParity_DeleteWordAcrossDecorator_Forward test` (passed). Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/OptimizedReconcilerTextFastPathTests -only-testing:LexicalTests/OptimizedReconcilerHistoryParityTests -only-testing:LexicalTests/OptimizedReconcilerHistoryListQuoteParityTests -only-testing:LexicalTests/OptimizedReconcilerHistoryImageParityTests -only-testing:LexicalTests/OptimizedReconcilerDecoratorGranularityParityTests test` (passed).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -skip-testing:LexicalTests/RopeChunkIterationTests -skip-testing:LexicalTests/RopeTextStoragePerformanceTests -skip-testing:LexicalTests/ReconcilerBenchmarkTests -skip-testing:LexicalTests/MixedDocumentLiveBenchmarkTests -skip-testing:LexicalTests/MixedDocumentBenchmarkTests -skip-testing:LexicalTests/InsertBenchmarkTests -skip-testing:LexicalTests/DFSOrderIndexingBenchmarkTests test` (passed, log: /tmp/lexical-test-results-skipbench-final.log). Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed, log: /tmp/lexical-playground-build-final.log).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/RopeReconcilerTests test` (passed, log: /tmp/lexical-test-ihl5-rope-reconciler.log). `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -skip-testing:LexicalTests/RopeChunkIterationTests -skip-testing:LexicalTests/RopeTextStoragePerformanceTests -skip-testing:LexicalTests/ReconcilerBenchmarkTests -skip-testing:LexicalTests/MixedDocumentLiveBenchmarkTests -skip-testing:LexicalTests/MixedDocumentBenchmarkTests -skip-testing:LexicalTests/InsertBenchmarkTests -skip-testing:LexicalTests/DFSOrderIndexingBenchmarkTests test` (passed, log: /tmp/lexical-test-results-skipbench-ihl5.log). Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed, log: /tmp/lexical-playground-build-ihl5.log).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/LargePasteCursorMovementTests/testRepeatedLargePasteWithInterleavedNewlines_DoesNotExplodeMemory test` (passed, log: /tmp/lexical-test-hx1-regression-2.log). `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -skip-testing:LexicalTests/RopeChunkIterationTests -skip-testing:LexicalTests/RopeTextStoragePerformanceTests -skip-testing:LexicalTests/ReconcilerBenchmarkTests -skip-testing:LexicalTests/MixedDocumentLiveBenchmarkTests -skip-testing:LexicalTests/MixedDocumentBenchmarkTests -skip-testing:LexicalTests/InsertBenchmarkTests -skip-testing:LexicalTests/DFSOrderIndexingBenchmarkTests test` (passed, log: /tmp/lexical-test-results-skipbench-hx1-2.log). Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed, log: /tmp/lexical-playground-build-hx1.log).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/LargePasteCursorMovementTests/testPasteGenerated2000Lines_MemoryAndCaretMoves test` (passed, log: /tmp/lexical-test-ihl6-2k-paste.log). `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -skip-testing:LexicalTests/RopeChunkIterationTests -skip-testing:LexicalTests/RopeTextStoragePerformanceTests -skip-testing:LexicalTests/ReconcilerBenchmarkTests -skip-testing:LexicalTests/MixedDocumentLiveBenchmarkTests -skip-testing:LexicalTests/MixedDocumentBenchmarkTests -skip-testing:LexicalTests/InsertBenchmarkTests -skip-testing:LexicalTests/DFSOrderIndexingBenchmarkTests test` (passed, log: /tmp/lexical-test-results-skipbench-ihl6-2.log). Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed, log: /tmp/lexical-playground-build-ihl6.log).

## 2025-12-26
- lexical-ios-qmk (done): Added regression test that pastes `sample.md` (~1200 lines) into a real window-backed editor and verifies caret moves stay fast; optimized selection-only updates by skipping the reconciler diff pipeline when there are no dirty nodes (selection-only navigation), preventing massive CPU spikes on cursor movement.
- lexical-ios-a78 (done): Added memory/timing instrumentation for large inserts + fixed native-range → Lexical selection mapping at end-of-document (range cache point mapping) to prevent flaky select+delete at the end of text after edits.
- lexical-ios-cqy (done): Reduced huge transient memory spikes when selecting very large ranges (e.g. Select All after large pastes) by clamping `TextView.selectionRects(for:)` to the visible viewport for large selections, avoiding full-document TextKit layout; added large-paste regression tests (double-paste + select-all, and multi-paste memory guard).
- lexical-ios-ihl (open): Drafted `docs/PerformanceNextSteps.md` outlining the next performance initiatives (large paste memory spikes + large-doc cursor/edit lag) and created the bd epic + subtasks for execution planning.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' test` (passed); `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed).

## 2025-12-19
- lexical-ios-0qp (done): Added off-main text-only planning snapshot + materialization path, wired into central aggregation with state-id validation and planning timing.
- lexical-ios-8qy (done): Reverted off-main planning snapshot path (sync overhead) to keep text-only planning on main.
- lexical-ios-i8b (done): Switched decorator cache repair/sync to single-pass attachment maps; reuse lookup in decorator reconciliation.
- lexical-ios-6fw (done): Track dirty decorator positions and reposition only visible/dirty keys in LayoutManager (UIKit + AppKit).
- lexical-ios-5mc (done): Gate block-attribute pass for text-only aggregation using block-attribute diff checks.
- lexical-ios-178 (done): Added SPM resource declarations for LexicalDemoSwiftUI (assets) and excluded Info.plist/entitlements to eliminate unhandled resource warnings; remaining SwiftSoup + sysroot warnings tracked in lexical-ios-dqz + lexical-ios-kod.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' test` (passed); `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed); `swift build --sdk "$(xcrun --sdk iphonesimulator --show-sdk-path)" -Xswiftc "-target" -Xswiftc "x86_64-apple-ios16.0-simulator"` (passed); `swift build --sdk "$(xcrun --sdk iphonesimulator --show-sdk-path)" -Xswiftc "-target" -Xswiftc "arm64-apple-ios16.0-simulator"` (passed).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' test` (failed once with OptimizedReconcilerNoOpDeleteParityTests.testParity_BackspaceAtStartOfDocument_NoOp; rerun passed); `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/OptimizedReconcilerNoOpDeleteParityTests test` (passed); `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed); `swift build --sdk "$(xcrun --sdk iphonesimulator --show-sdk-path)" -Xswiftc "-target" -Xswiftc "x86_64-apple-ios16.0-simulator"` (passed, SwiftSoup resource warnings remain); `swift build --sdk "$(xcrun --sdk iphonesimulator --show-sdk-path)" -Xswiftc "-target" -Xswiftc "arm64-apple-ios16.0-simulator"` (passed, SwiftSoup + sysroot warnings remain).

## 2025-12-28
- lexical-ios-vod (done): Fixed IME marked text replacing selected text by syncing Lexical selection before starting/updating marked text (`TextView.setMarkedTextInternal` now calls `onSelectionChange(editor:)`), so programmatic selection changes replace correctly during composition.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/MarkedTextEditorStateIntegrationTests test` (passed, log: /tmp/lexical-ios-vod-test.log).
- lexical-ios-wdm (done): Added regression test to ensure backspace deletes a programmatic native selection even if `textViewDidChangeSelection` didn’t fire (selection is synced on-demand in `TextView.deleteBackward`).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/UIKitSelectionSyncIntegrationTests/testBackspaceDeletesSelectedRangeWithoutSelectionSync test` (passed, log: /tmp/lexical-ios-wdm-test.log).
- lexical-ios-nn7 (closed: cannot reproduce): Added LexicalDemoMac autorun harness for large-doc updates + selectAll/edit (env: `LEXICAL_DEMO_AUTORUN_LARGE_DOC=1`) and optimized `Editor.cachedDFSOrderAndIndex` to prefer tree-derived DFS order (fallback to sort) to reduce allocations after DFS cache invalidation; could not reproduce malloc “range group - out of space” with 6k paragraphs.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/FenwickTreeTests -only-testing:LexicalTests/FenwickLocationRebuildTests -only-testing:LexicalTests/FenwickCentralAggregationTests test` (passed, log: /tmp/lexical-ios-nn7-fenwick-tests.log). Demo run: `LEXICAL_DEMO_AUTORUN_LARGE_DOC=1 LEXICAL_DEMO_AUTORUN_LARGE_DOC_PARAGRAPHS=6000 swift run LexicalDemoMac` (log: /tmp/lexical-ios-nn7-demo-6k-2.log).
- lexical-ios-yqc (done): Confirmed select-all-on-large-doc memory spike regression is fixed: `testPaste3xSelectAll_MemoryProfile` peaks ~31.5MB on iOS simulator (no 1GB+ malloc fragmentation spike).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/LargePastePositionAndContentTests/testPaste3xSelectAll_MemoryProfile test` (passed, log: /tmp/lexical-ios-yqc-test.log).
- lexical-ios-gbf (done): Fixed undo/redo parity for list item merge/split by ensuring RopeReconciler uses node overridable `getPreamble`/`getPostamble` (e.g. list item ZWSP marker) rather than bypassing plugin overrides via `ElementNode.getPreambleAndPostamble`.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/OptimizedReconcilerHistoryParityTests/testParity_UndoRedo_MergeParagraph -only-testing:LexicalTests/OptimizedReconcilerHistoryListQuoteParityTests/testParity_UndoRedo_ListItemSplitMerge -only-testing:LexicalTests/OptimizedReconcilerHistoryListQuoteParityTests/testParity_UndoRedo_QuoteSplitMerge test` (passed, logs: /tmp/lexical-ios-gbf.log, /tmp/lexical-ios-gbf-parity.log).
- lexical-ios-4cj (done): Fixed AppKit tab/backtab indent test setup by clearing the editor’s default paragraph before inserting the test paragraph; tab/backtab correctly increments/decrements the selected paragraph indent.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=macOS' -only-testing:LexicalTests/AppKitTabBacktabTests/testTabAndBacktab_IndentAndOutdentParagraph test` (passed, log: /tmp/lexical-ios-4cj.log).
- lexical-ios-c9r (done): Fixed AppKit theme root font application by building a fresh `NSFontDescriptor` from theme `fontFamily`/`fontSize` (avoids `withFamily` on the system descriptor resolving back to `.AppleSystemUIFont`).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=macOS' -only-testing:LexicalTests/AttributesUtilsAppKitTests/testThemeForRootNode_AppKit test` (passed, log: /tmp/lexical-ios-c9r.log).
- lexical-ios-dqz (done): Updated SwiftSoup dependency to remove SwiftPM “unhandled file(s)” warnings for Info*.plist when building for iOS Simulator (SwiftSoup now resolved at 2.11.3).
- Build: `swift build --sdk "$(xcrun --sdk iphonesimulator --show-sdk-path)" -Xswiftc "-target" -Xswiftc "arm64-apple-ios16.0-simulator"` (passed, log: /tmp/lexical-ios-dqz-swiftbuild-2.log).
- lexical-ios-kod (done): Added `scripts/spm/build_ios_sim.sh` and updated `AGENTS.md` to recommend it for iOS-simulator SwiftPM builds; script uses a SwiftPM destination file and builds iOS-relevant targets via `--target` to avoid sysroot mismatch warnings from linking demo executables.
- Build: `scripts/spm/build_ios_sim.sh --arch arm64` (passed, log: /tmp/lexical-ios-kod-ios-sim-build-arm64.log).
- Fix: Prevented `SerializationTests` crashes by validating cached child indices in `Node.getIndexWithinParent()` (fallback to scan + cache invalidation) and making `RangeSelection.applyNativeSelection` clamp invalid native ranges.
- Fix: Hardened `TextNode.spliceText` against out-of-bounds prefix slicing by clamping the prefix substring range.
- lexical-ios-ct5 (done): Fixed crash in `OptimizedReconcilerDecoratorGranularityParityTests.testParity_DeleteWordAcrossDecorator_Forward` by clamping decorator layout invalidation ranges in `Editor.mountDecoratorSubviewsIfNecessary()` to `textStorage.length` before calling `LayoutManager` APIs (root cause: out-of-bounds invalidation ranges during decorator mount).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' test` (passed, log: /tmp/lexical-test-results-3.log).
- Playground build: `xcodebuild -project Playground/LexicalPlayground.xcodeproj -scheme LexicalPlayground -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' build` (passed, log: /tmp/lexical-playground-build.log).
- lexical-ios-2lq (done): Added selection sync coverage for typing + newline insertion + caret movement (native ↔︎ Lexical selection round-trips).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/NativeSelectionSyncParityTests test` (passed, log: /tmp/lexical-native-selection-sync-newtests-2.log).
- lexical-ios-xex (done): Added UIKit “usage” smoke tests that exercise reconciler paths via native input (typing/newline/range delete), copy→paste round-trip, and decorator insertion/deletion.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsageSmokeTests test` (passed, log: /tmp/lexical-reconciler-usage-smoke-5.log).
- lexical-ios-9c4 (done): Expanded the UIKit “usage” scenario matrix to cover start-of-doc paste/newline/backspace, selection replacement (type + paste across newline), undo/redo via history plugin, multi-scalar emoji range deletion, and plugin-driven list/autolink scenarios.
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsageSmokeTests test` (passed via targeted runs; logs: /tmp/lexical-9c4-1.log, /tmp/lexical-9c4-2.log, /tmp/lexical-9c4-4.log).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsageUndoRedoTests test` (passed, log: /tmp/lexical-9c4-3b.log).
- Tests: `xcodebuild -workspace Playground/LexicalPlayground.xcodeproj/project.xcworkspace -scheme Lexical-Package -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.0' -only-testing:LexicalTests/ReconcilerUsagePluginsTests test` (passed, log: /tmp/lexical-9c4-5.log).
